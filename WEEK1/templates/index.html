<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>Home | SWEETER</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS 버전 바뀌면 이 코드 수시로 바꿔줘야 함-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!--    <script type="text/JavaScript" src="./index.js" defer></script>-->

    <script>
        function sign_out() {
            $.removeCookie('mytoken', {path: '/'});
            alert('로그아웃 성공!')
            window.location.href = "/login"
        }
        $(document).ready(function () {
            movie_listing('드라마')
        })
        function goDetail(list){
            console.log('36까지 실행 가능') //불가능한걸로
            title=list['title']
            window.location.href = f`/detail/${title}?list=${list}`
        }

        function movie_listing(genre){
            $.ajax({
                type: "GET",
                url: `/genre?givegenre=${genre}`,
                data: {},
                success: function (response) {
                    $("#card-list").empty();

                    let list = response['movieList']
                    for(let i =0 ;i<list.length;i++){
                        let idVal = list[i]['id']
                        let img_url = list[i]['img_url']
                        let title = list[i]['title']
                        let grade = list[i]['grade']
                        let genre=''
                        for(let t = 0 ; t <list[i]['genre'].length;t++ ){
                            genre+= list[i]['genre'][t]
                            if (t-1!=list[i]['genre'].length){
                                genre+=', '
                            }
                        }
                        let template = `
<span id = "card" class="card mb-3" style="max-width: 540px;">
  <div class="row g-0">
    <div class="col-md-4">
      <img src="${img_url}" class="img-fluid rounded-start" alt="영화">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title" id="movie-title">영화 제목: ${title}</h5>
        <p class="card-text" id="movie-grade">영화 평점: ${grade}</p>
          <p class="card-text" id = "movie-genre">영화 장르: ${genre}</p>
<!--          이 버튼을 누르면 영화 상세 페이지로 가야합니다!-->
<!--                    <a class="btn btn-primary" onclick="goDetail(${list[i]})" role="button">Link</a> !-->
            <a class="btn btn-primary" href="/detail/${encodeURI(title)}?list_give=${list[i]}" role="button">Link</a>
      </div>
    </div>
  </div>
</span>
`
                        $('#card-list').append(template)
                    }
                }
            })
        }
        function pass_genre(genre){
            console.log(genre)
            let give_genre=''
            switch (genre){
                case '1':
                    give_genre='드라마'
                    break
                case '2':
                    give_genre='판타지'
                    break
                case '3':
                    give_genre='서부'
                    break
                case '4':
                    give_genre='공포'
                    break
                case '5':
                    give_genre='멜로/로맨스'
                    break
                case '6':
                    give_genre='모험'
                    break
                case '7':
                    give_genre='스릴러'
                    break
                case '8':
                    give_genre='느와르'
                    break
                case '9':
                    give_genre='컬트'
                    break
                case '10':
                    give_genre='다큐멘터리'
                    break
                case '11':
                    give_genre='코미디'
                    break
                case '12':
                    give_genre='가족'
                    break
                case '13':
                    give_genre='미스터리'
                    break
                case '14':
                    give_genre='전쟁'
                    break
                case '15':
                    give_genre='애니메이션'
                    break
                case '16':
                    give_genre='뮤지컬'
                    break
                case '17':
                    give_genre='SF'
                    break
                case '18':
                    give_genre='액션'
                    break
                case '19':
                    give_genre='무협'
                    break
                case '20':
                    give_genre='범죄'
                    break
                case '21':
                    give_genre='서스팬스'
                    break
                case '22':
                    give_genre='서사'
                    break
                case '23':
                    give_genre='블랙코미디'
                    break
                case '24':
                    give_genre='실험'
                    break
                case '25':
                    give_genre='공연실황'
                    break
            }
            movie_listing(give_genre)
        }
    </script>
    <style>
        .wrap {
            text-align: center;
        }

        .one {


            background-color: rgb(252, 233, 232);
            width: auto;
            height: 150px;
        }

        .two {
            background-color: aliceblue;
            width: auto;
            height: 450px;

        }

        .tree {

            height: 100px;
            width: auto;
            border-bottom: solid 3px;
            border-top: solid 3px;

        }

        .four {
            alignment: center;
            background-color: blue;
            height: auto;
            width: auto;

        }

        .btn-light {


            margin: 0px 35px 0px 35px;
        }

        .search {

            align-content: center;
            text-align: center;
        }

        .search_window{
            text-align: center;
            position:relative;
            width:800px;
            margin: 0 auto;
        }
        .search_btn {
            position:absolute;
            top:0;
            right:0;
        }
        .search_btn i {
            padding:17px 30px;
        }




        .new_card {
            background-color: blue;
            width: 250px;
            height: 300px;
            margin: 20px 10px 20px 10px;
            display: inline-block;
        }

        .card-img-top {

            background-position: center;
            background-size: cover;

        }

        .right-box {
            position: absolute;
            top: 0;
            right: 0;
            /*background-image: url("");*/
        }
    </style>
    <script>
        function search_btn(){
            let search_result =
                alert("Search")
        }

        function profile(){
            alert("Profile")
        }
    </script>
</head>
<body>
<div class="one">
    <div style="text-align: center; font-size: 35px; ">같이보실?<span class='right-box' type="button" onclick="profile()">프로필</span></div>
    <div class="search_window">
            <span class="search">
                <input class="search__input" type="text" placeholder="검색" style="border-radius: 50px; width: 800px; height: 50px">

            </span>
        <span class="search_btn">
             <i  type="button"  onclick="search_btn()" class="fas fa-search"></i>
            </span>
    </div>
</div>
<div class="two">
    <div class="mov" style="margin:10px 30px 10px 30px">
        <div class="new_card">
            <img src="https://img1.daumcdn.net/thumb/C300x430/?fname=https%3A%2F%2Ft1.daumcdn.net%2Fmovie%2F5a64941e61f5a3fbcad8ef6bbf7edb073b35c01a"
                 class="card-img-top" alt="...">
            <div class="card-body">
                <p class="card-text">영화제목 movie_title.</p>
            </div>
        </div>
        <div class="new_card">
            <img src="https://img1.daumcdn.net/thumb/C300x430/?fname=https%3A%2F%2Ft1.daumcdn.net%2Fmovie%2F5a64941e61f5a3fbcad8ef6bbf7edb073b35c01a"
                 class="card-img-top" alt="...">
            <div class="card-body">
                <p class="card-text">영화제목 movie_title.</p>
            </div>
        </div>
        <div class="new_card">
            <img src="https://img1.daumcdn.net/thumb/C300x430/?fname=https%3A%2F%2Ft1.daumcdn.net%2Fmovie%2F5a64941e61f5a3fbcad8ef6bbf7edb073b35c01a"
                 class="card-img-top" alt="...">
            <div class="card-body">
                <p class="card-text">영화제목 movie_title.</p>
            </div>
        </div>
        <div class="new_card">
            <img src="https://img1.daumcdn.net/thumb/C300x430/?fname=https%3A%2F%2Ft1.daumcdn.net%2Fmovie%2F5a64941e61f5a3fbcad8ef6bbf7edb073b35c01a"
                 class="card-img-top" alt="...">
            <div class="card-body">
                <p class="card-text">영화제목 movie_title.</p>
            </div>
        </div>
    </div>

</div>
<div class="tree">
    <button type="button" id="1"  class="btn btn-light" onclick="pass_genre(this.id)">드라마</button>
    <button type="button" id="2" class="btn btn-light" onclick="pass_genre(this.id)">판타지</button>
    <button type="button" id="3" class="btn btn-light" onclick="pass_genre(this.id)">서부</button>
    <button type="button" id="4" class="btn btn-light" onclick="pass_genre(this.id)">공포</button>
    <button type="button" id="5" class="btn btn-light" onclick="pass_genre(this.id)">멜로/로맨스</button>
    <button type="button" id="6" class="btn btn-light" onclick="pass_genre(this.id)">모험</button>
    <button type="button" id="7" class="btn btn-light" onclick="pass_genre(this.id)">스릴러</button>
    <button type="button" id="8" class="btn btn-light" onclick="pass_genre(this.id)">느와르</button>
    <button type="button" id="9" class="btn btn-light" onclick="pass_genre(this.id)">컬트</button>
    <button type="button" id="10" class="btn btn-light" onclick="pass_genre(this.id)">다큐멘터리</button>
    <button type="button" id="11" class="btn btn-light" onclick="pass_genre(this.id)">코미디</button>
    <button type="button" id="12" class="btn btn-light" onclick="pass_genre(this.id)">가족</button>
    <button type="button" id="13" class="btn btn-light" onclick="pass_genre(this.id)">미스터리</button>
    <button type="button" id="14" class="btn btn-light" onclick="pass_genre(this.id)">전쟁</button>
    <button type="button" id="15" class="btn btn-light" onclick="pass_genre(this.id)">애니메이션</button>
    <button type="button" id="16" class="btn btn-light" onclick="pass_genre(this.id)">뮤지컬</button>
    <button type="button" id="17" class="btn btn-light" onclick="pass_genre(this.id)">SF</button>
    <button type="button" id="18" class="btn btn-light" onclick="pass_genre(this.id)">액션</button>
    <button type="button" id="19" class="btn btn-light" onclick="pass_genre(this.id)">무협</button>
    <button type="button" id="20" class="btn btn-light" onclick="pass_genre(this.id)">범죄</button>
    <button type="button" id="21" class="btn btn-light" onclick="pass_genre(this.id)">서스펜스</button>
    <button type="button" id="22" class="btn btn-light" onclick="pass_genre(this.id)">서사</button>
    <button type="button" id="23" class="btn btn-light" onclick="pass_genre(this.id)">블랙코미디</button>
    <button type="button" id="24" class="btn btn-light" onclick="pass_genre(this.id)">실험</button>
    <button type="button" id="25" class="btn btn-light" onclick="pass_genre(this.id)">공연실황</button>

</div>

<div id= "card-list" class = "card-wrap">


</div>

</body>
</html>
